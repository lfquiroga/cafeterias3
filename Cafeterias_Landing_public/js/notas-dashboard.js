window.addEventListener("DOMContentLoaded", function () {  /*   *Funciones para cargar un menu   */  var enviar_nota = $s('#enviar_nota');  var prePath = '../../';    var descripcion = $s('#descripcion');  var titulo = $s('#titulo');   var rol = $s('#rol');  var usuario = $s('#usuario');    cargar_tabla();  //var id_editar = $s('#menu_editar');   enviar_nota.addEventListener("click", function (e) {    let accion = $s('#accion');    var dataUnParsed = {      texto: descripcion.value,      titulo: titulo.value,      crear: true    };    let data = JSON.stringify(dataUnParsed);       ajax({      method: 'POST',      url: prePath + 'Cafeterias_Landing_API/notas-router.php',      data: data,      successCallback: function (rta) {               let errores_form = JSON.parse(rta);              if (errores_form.error == 1) {                   if(errores_form.errores.texto[0]){           $('#desc_error').append(errores_form.errores.texto[0]);         }                  if(errores_form.errores.titulo[0]){           $('#titulo_error').append(errores_form.errores.titulo[0]);                  }        }else{                    titulo.value = '';                    descripcion.value = '';          //recargo la tabla         // cargar_tabla();          let divContainerModal = document.createElement("div");            divContainerModal.className = "modalWrapper";            let divModal = document.createElement("div");            divModal.className = "modal";            let textoInfo = document.createElement("p");            textoInfo.innerHTML = "Nota creada correctamente.";            let confirmarBorrar = document.createElement("a");            confirmarBorrar.href = "#";            confirmarBorrar.innerHTML = "Ok";            let body = document.getElementsByTagName("body")[0];            body.appendChild(divContainerModal);            divContainerModal.appendChild(divModal);            divModal.appendChild(textoInfo);            divModal.appendChild(confirmarBorrar);                                    confirmarBorrar.addEventListener("click",function(){                divContainerModal.innerHTML = "";                body.removeChild(divContainerModal);            });                  }      }    })  })          /*  *Por medio de esta funcion puedo crear  * y refrescar la tabla las veces necesaria  */ function cargar_tabla(){   head_tabla='<tr style="background-color:#f2f2f2;">\n\                  <th>Titulo</th>\n\                  <th>Texto</th>\n\                  <th>Editar</th>\n\                  <th>Eliminar</th>\n\                </tr>       ';    //vacio la tabla  $('#listado-dashboard').html('');  //pongo el encabezadp  $('#listado-dashboard').append(head_tabla);   ajax({    url: '../Cafeterias_Landing_API/notas-router.php',    method: 'GET',    successCallback: function (rta){           let rankingData = JSON.parse(rta);            console.log(rankingData);      $.each(rankingData, function( index, value ) {      contenido ='\n\      \n\        <tr>\n\      \n\        <td class="width20percnt">'+value.titulo+'</td>\n\      \n\        <td class="width40percnt">'+value.nota.slice(1, 40)+'</td>\n\      \n\        <td class="width15percnt"><div class="bntdltcont txtaligncenter">\n\      <i class="fas fa-edit icnfawsm"></i>\n\      <input class="editar eliminar_comentario" onclick="editar('+value.ID_nota+')" type="button" value="Editar" id="'+value.ID_nota+'"></div></td>\n\      \n\        <td class="width15percnt"><div class="bntdltcont txtaligncenter">\n\      <i class="fas fa-trash-alt icnfawsm"></i><input type="button" class="eliminar_comentario" onclick="eliminar('+value.ID_nota+')" value="Borrar">\n\      </div></td>\n\      \n\</tr>';                $('#listado-dashboard').append(contenido);       });      }    });    }            /** * Editar un menu * @fix me */function editar(id){  id_menu=id;        var dataUnParsed = {        datos_nota:true,        id: id_menu              };        let data = JSON.stringify(dataUnParsed);   var id_editar = $s('#menu_editar');    ajax({    url: '../Cafeterias_Landing_API/nota-router.php',    method: 'POST',    data: data,    successCallback: function (rta){            let rankingData = JSON.parse(rta);      datos=rankingData[0];            descripcion.value=datos['descripcion'];      nombre.value=datos['nombre'];      precio.value=datos['precio'];      id_cafeteria.value=datos['id_cafeteria'];      id_editar.value=datos['id'];      accion.value='editar';      $('#cargadossistema').css('display','none');      $('#nuevo_menu').css('display','block');       }    });};});